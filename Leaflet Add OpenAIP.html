<script src=" https://unpkg.com/@joergdietrich/leaflet.terminator@1.0.0/L.Terminator.js"></script>
<script type="text/javascript">
    if(VRS && VRS.globalDispatch && VRS.serverConfig) {
        VRS.globalDispatch.hook(VRS.globalEvent.bootstrapCreated, function(bootStrap) {
          
            if(bootStrap.hookMapInitialised) {

                bootStrap.hookMapInitialised(function(pageSettings) {

                    if(pageSettings.mapPlugin && pageSettings.mapPlugin.getNativeType() === 'OpenStreetMap') {

                        var map = pageSettings.mapPlugin.getNative();

// IMPORTANT NOTE
// This code is copyright Chris Gault chrisgault@gmail.com

//Add API Keys here

//		var owmKey = '9a2937948639bd77ac782297bbb79abd';
//		var FreedarowmKey = '6e14dd45847429256ce15f40e619f7fd';
		var AerisID = 'SuSwIkDOBJQHbidEMprb9';
		var AerisSecretKey = 'ejmLAJCuQYN5qcnqOJnjTUDjxK9Q5fRLh0Rdejy6';

// Add TACAN and VOR icons

		var vorIcon = L.icon({
    			iconUrl: 'location.png',
    			iconSize:     [16, 16], // size of the icon
    			iconAnchor:   [8, 8], // point of the icon which will correspond to marker's location
    			popupAnchor:  [0, -20] // point from which the popup should open relative to the iconAnchor
		});


// Add navigation aids

		var AC = L.marker([55.81410, -4.54274], {icon: vorIcon}).bindPopup('Glasgow AC<br />NDB'),
			ADN = L.marker([57.3106, -2.26722], {icon: vorIcon}).bindPopup('Aberdeen ADN<br />VOR'),
			AP = L.marker([52.11630, -4.55983], {icon: vorIcon}).bindPopup('Aberporth AP<br />NDB'),
			AQ = L.marker([57.13830, -2.40472], {icon: vorIcon}).bindPopup('Aberdeen AQ<br />NDB'),
			ATF = L.marker([57.0775, -2.1057], {icon: vorIcon}).bindPopup('Aberdeen Dyce ATF<br />NDB'),
			BCL = L.marker([57.4751, -7.37032], {icon: vorIcon}).bindPopup('Benbecula BCL<br />DME'),
			BCN = L.marker([51.7256, -3.26306], {icon: vorIcon}).bindPopup('Brecon BCN<br />VOR'),
			BDN = L.marker([51.1490, -1.75265], {icon: vorIcon}).bindPopup('Boscombe Down BDN<br />TACAN'),
			BEL = L.marker([54.6611, -6.23], {icon: vorIcon}).bindPopup('Belfast BEL<br />VOR'),
			BEN = L.marker([57.4779, -7.3653], {icon: vorIcon}).bindPopup('Benbecula BEN<br />VOR'),
			BFD = L.marker([57.2548, -5.83286], {icon: vorIcon}).bindPopup('Broadford BFD<br />NDB'),
			BHD = L.marker([50.3986, -3.4936], {icon: vorIcon}).bindPopup('Berry Head BHD<br />VOR'),
			BHX = L.marker([52.4545, -1.75239], {icon: vorIcon}).bindPopup('Birmingham BHX<br />NDB'),
			BIA = L.marker([50.7777, -1.84249], {icon: vorIcon}).bindPopup('Bournemouth BIA<br />NDB'),
			BIG = L.marker([51.3309, 0.034811], {icon: vorIcon}).bindPopup('Biggin BIG<br />VOR'),
			BKL = L.marker([55.0608, -7.01333], {icon: vorIcon}).bindPopup('Ballykelly BKL<br />TACAN'),
			BKY = L.marker([51.9897, 0.061944], {icon: vorIcon}).bindPopup('Barkway BKY<br />VOR'),
			BLK = L.marker([51.3233, -0.844794], {icon: vorIcon}).bindPopup('Blackbushe BLK<br />NDB'),
			BNN = L.marker([51.7261, -0.549722], {icon: vorIcon}).bindPopup('Bovingdon BNN<br />VOR'),
			BOU = L.marker([52.2111, -0.044936], {icon: vorIcon}).bindPopup('Bourn BOU<br />NDB'),
			BPK = L.marker([51.7497, -0.106667], {icon: vorIcon}).bindPopup('Brookmans Park BPK<br />VOR'),
			BRI = L.marker([51.3805, -2.71619], {icon: vorIcon}).bindPopup('Bristol BRI<br />NDB'),
			BRR = L.marker([57.0256, -7.44892], {icon: vorIcon}).bindPopup('Barra BRR<br />NDB'),
			BSO = L.marker([51.6145, -1.09944], {icon: vorIcon}).bindPopup('Benson BSO<br />TACAN'),
			BUR = L.marker([51.5189, -0.677222], {icon: vorIcon}).bindPopup('Burnham BUR<br />NDB'),
			BV = L.marker([53.72540, -0.581483], {icon: vorIcon}).bindPopup('Brough BV<br />NDB'),
			BZN = L.marker([51.7482, -1.6035], {icon: vorIcon}).bindPopup('Brize Norton BZN<br />TACAN'),
			CAE = L.marker([53.1000, -4.34], {icon: vorIcon}).bindPopup('Caernarfon CAE<br />NDB'),
			CAM = L.marker([52.2109, 0.182792], {icon: vorIcon}).bindPopup('Cambridge CAM<br />NDB'),
			CBL = L.marker([55.4356, -5.68807], {icon: vorIcon}).bindPopup('Campbeltown CBL<br />NDB'),
			CBN = L.marker([55.9756, -3.97472], {icon: vorIcon}).bindPopup('Cumbernauld CBN<br />NDB'),
			CFD = L.marker([52.0742, -0.610792], {icon: vorIcon}).bindPopup('Cranfield CFD<br />VOR'),
			CGY = L.marker([53.0910, -0.168975], {icon: vorIcon}).bindPopup('Coningsby CGY<br />TACAN'),
			CHT = L.marker([51.6231, -0.518333], {icon: vorIcon}).bindPopup('Chiltern CHT<br />NDB'),
			CLN = L.marker([51.8484, 1.14761], {icon: vorIcon}).bindPopup('Clacton CLN<br />VOR'),
			COM = L.marker([50.9662, -2.15517], {icon: vorIcon}).bindPopup('Compton Abbas COM<br />NDB'),
			CPT = L.marker([51.4917, -1.2197], {icon: vorIcon}).bindPopup('Compton CPT<br />VOR'),
			CSL = L.marker([52.7453, 1.34885], {icon: vorIcon}).bindPopup('Coltishall CSL<br />TACAN'),
			CTM = L.marker([52.7354, -0.650769], {icon: vorIcon}).bindPopup('Cottesmore CTM<br />TACAN'),
			CWL = L.marker([53.0264, -0.489072], {icon: vorIcon}).bindPopup('Cranwell CWL<br />NDB'),
			DCS = L.marker([54.7219, -3.34056], {icon: vorIcon}).bindPopup('Dean Cross DCS<br />VOR'),
			DET = L.marker([51.3039, 0.597222], {icon: vorIcon}).bindPopup('Detling DET<br />VOR'),
			DND = L.marker([56.4551, -3.11492], {icon: vorIcon}).bindPopup('Dundee DND<br />NDB'),
			DTY = L.marker([52.1803, -1.11389], {icon: vorIcon}).bindPopup('Daventry DTY<br />VOR'),
			DVR = L.marker([51.1625, 1.35917], {icon: vorIcon}).bindPopup('Dover DVR<br />VOR'),
			EAS = L.marker([50.9550, -1.35612], {icon: vorIcon}).bindPopup('Southampton EAS<br />NDB'),
			EDN = L.marker([55.9784, -3.28412], {icon: vorIcon}).bindPopup('Edinburgh EDN<br />NDB'),
			EKN = L.marker([54.3942, -7.64337], {icon: vorIcon}).bindPopup('Enniskillen EKN<br />NDB'),
			EPM = L.marker([51.3194, -0.371944], {icon: vorIcon}).bindPopup('Epsom EPM<br />NDB'),
			FFA = L.marker([51.6817, -1.79761], {icon: vorIcon}).bindPopup('Fairford FFA<br />TACAN'),
			FNL = L.marker([52.7417, -0.027472], {icon: vorIcon}).bindPopup('Fenland FNL<br />NDB'),
			FOS = L.marker([51.3474, -0.565428], {icon: vorIcon}).bindPopup('Fairoaks FOS<br />NDB'),
			GAM = L.marker([53.2814, -0.947222], {icon: vorIcon}).bindPopup('Gamston GAM<br />VOR'),
			GE = L.marker([51.16440, -0.069133], {icon: vorIcon}).bindPopup('Gatwick GE<br />NDB'),
			GLG = L.marker([55.9244, -4.33608], {icon: vorIcon}).bindPopup('Glasgow GLG<br />NDB'),
			GOS = L.marker([51.8922, -2.16793], {icon: vorIcon}).bindPopup('Gloucestershire GOS<br />DME'),
			GOW = L.marker([55.8705, -4.44573], {icon: vorIcon}).bindPopup('Glasgow GOW<br />VOR'),
			GST = L.marker([51.8920, -2.16790], {icon: vorIcon}).bindPopup('Gloucestershire GST<br />NDB'),
			GWC = L.marker([50.8553, -0.756667], {icon: vorIcon}).bindPopup('Goodwood GWC<br />VOR'),
			GY = L.marker([51.13070, -0.315956], {icon: vorIcon}).bindPopup('Gatwick GY<br />NDB'),
			HAV = L.marker([51.8319, -4.96809], {icon: vorIcon}).bindPopup('Haverfordwest HAV<br />NDB'),
			HEN = L.marker([51.7597, -0.790278], {icon: vorIcon}).bindPopup('Henton HEN<br />NDB'),
			HON = L.marker([52.3567, -1.66361], {icon: vorIcon}).bindPopup('Honiley HON<br />VOR'),
			INS = L.marker([57.5426, -4.04154], {icon: vorIcon}).bindPopup('Inverness INS<br />VOR'),
			IOF = L.marker([58.8299, -3.14506], {icon: vorIcon}).bindPopup('Flotta IOF<br />NDB'),
			ISV = L.marker([58.2144, -6.32605], {icon: vorIcon}).bindPopup('Stornoway ISV<br />DME'),
			ISY = L.marker([55.683, -6.24941], {icon: vorIcon}).bindPopup('Islay ISY<br />DME'),
			IVR = L.marker([57.5415, -4.04597], {icon: vorIcon}).bindPopup('Inverness IVR<br />NDB'),
			IW = L.marker([50.6808, -1.10603], {icon: vorIcon}).bindPopup('Bembridge IW<br />NDB'),
			KS = L.marker([57.6504, -3.58704], {icon: vorIcon}).bindPopup('Kinloss KS<br />NDB'),
			KSS = L.marker([57.6593, -3.53511], {icon: vorIcon}).bindPopup('Kinloss KSS<br />TACAN'),
			KW = L.marker([58.9596, -2.91158], {icon: vorIcon}).bindPopup('Kirkwall KW<br />NDB'),
			KWL = L.marker([58.9597, -2.89395], {icon: vorIcon}).bindPopup('Kirkwall KWL<br />VOR'),
			LA = L.marker([51.5083, -2.00587], {icon: vorIcon}).bindPopup('Lyneham LA<br />NDB'),
			LAM = L.marker([51.6461, 0.151667], {icon: vorIcon}).bindPopup('Lambourne LAM<br />VOR'),
			LAY = L.marker([55.6829, -6.24941], {icon: vorIcon}).bindPopup('Islay LAY<br />NDB'),
			LBA = L.marker([53.8650, -1.65289], {icon: vorIcon}).bindPopup('Leeds Bradford LBA<br />NDB'),
			LCY = L.marker([51.5044, 0.067503], {icon: vorIcon}).bindPopup('City LCY<br />NDB'),
			LDY = L.marker([50.9592, 0.937478], {icon: vorIcon}).bindPopup('Lydd LDY<br />DME'),
			LE = L.marker([52.60640, -1.035], {icon: vorIcon}).bindPopup('Leicester LE<br />DME'),
			LEE = L.marker([54.2967, -1.53667], {icon: vorIcon}).bindPopup('Leeming LEE<br />TACAN'),
			LIC = L.marker([52.7467, -1.71944], {icon: vorIcon}).bindPopup('Lichfield LIC<br />NDB'),
			LKH = L.marker([52.4064, 0.547964], {icon: vorIcon}).bindPopup('Lakenheath LKH<br />TACAN'),
			LND = L.marker([50.1363, -5.637], {icon: vorIcon}).bindPopup('Lands End LND<br />VOR'),
			LNS = L.marker([57.5165, -1.86831], {icon: vorIcon}).bindPopup('Longside LNS<br />VOR'),
			LON = L.marker([51.4872, -0.466667], {icon: vorIcon}).bindPopup('London LON<br />VOR'),
			LOO = L.marker([54.0505, -1.24913], {icon: vorIcon}).bindPopup('Linton on Ouse LOO<br />TACAN'),
			LSH = L.marker([51.1547, 0.648056], {icon: vorIcon}).bindPopup('Lashenden LSH<br />NDB'),
			LUK = L.marker([56.3728, -2.86367], {icon: vorIcon}).bindPopup('Leuchars LUK<br />TACAN'),
			LYD = L.marker([50.9997, 0.878611], {icon: vorIcon}).bindPopup('Lydd LYD<br />VOR'),
			LYE = L.marker([51.5100, -1.99233], {icon: vorIcon}).bindPopup('Lyneham LYE<br />TACAN'),
			LYX = L.marker([50.9722, 0.955286], {icon: vorIcon}).bindPopup('Lydd LYX<br />NDB'),
			MAC = L.marker([55.4300, -5.65028], {icon: vorIcon}).bindPopup('Machrihanish MAC<br />VOR'),
			MAM = L.marker([52.6473, 0.553167], {icon: vorIcon}).bindPopup('Marham MAM<br />TACAN'),
			SFD = L.marker([50.7606, 0.1219], {icon: vorIcon}).bindPopup('Seaford SFD<br />VOR'),
			VLN = L.marker([51.0050, -2.6388], {icon: vorIcon}).bindPopup('Yeovilton VLN<br />TACAN'),
			WOD = L.marker([51.4528, -0.878889], {icon: vorIcon}).bindPopup('Woodley WOD<br />NDB');

// Add Open AIP navaids

		var openAIPnav = L.tileLayer('http://{s}.tile.maps.openaip.net/geowebcache/service/tms/1.0.0/openaip_approved_navaids@EPSG%3A900913@png/{z}/{x}/{y}.png', {
                maxZoom: 14,
                minZoom: 8,
                tms: true,
                detectRetina: true,
                subdomains: '12',
                format: 'image/png',
                transparent: true,
				opacity: 0.75,
				attribution: "Airspace overlay from OpenAIP.net"
            });
		
		var tacanVOR = L.layerGroup([openAIPnav,MAM, MAC, LYX, LYD, LUK, LSH, LOO, LNS, LKH, LIC, LEE, LE, LDY, LCY, LBA, LAY, LAM, LA, KWL, KW, KSS, KS, IW, IVR, ISY, ISV, IOF, INS, HON, HEN, HAV, LYE, GY, GWC, GST, GOW, GOS, GLG, GE, GAM, FOS, FNL, FFA, EPM, EKN, EDN, EAS, DVR, DTY, DND, DET, DCS, CWL, CTM, CSL, COM, CLN, CHT, CGY, CFD, CBN, CBL, CAM, CAE, BV, BUR, BSO, BRR, AC, ADN, AP, AQ, ATF, BCL, BCN, BDN, BEL, BEN, BFD, BHD, BHX, BIA, BIG, BKL, BKY, BLK, BNN, BOU, BPK, BRI, BZN, LND, SFD, CPT, VLN, WOD]);


// Add civil and military airfield markers

		var civilIcon = new L.Icon({
  			iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png',
   			iconSize: [25, 41],
  			iconAnchor: [12, 41],
  			popupAnchor: [1, -34]
		});
		
		var milIcon = new L.Icon({
  			iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',
   			iconSize: [25, 41],
  			iconAnchor: [12, 41],
  			popupAnchor: [1, -34]
		});

// Add UK civil airfields

		var EGBJ = L.marker([51.8942, -2.1672], {icon: civilIcon}).bindPopup('<table><tr><th>Airfield:</th><th>Gloucestershire Airport, Staverton</th></tr><tr><td>ICAO:</td><td>EGBJ</td></tr><tr><td>IATA:</td><td>GLO</td></tr><tr><td>Runways:</td><td>04 / 22<br />09 / 27<br />18 / 36</td></tr><tr><td>Aerodrome chart</td><td><a href="http://www.ead.eurocontrol.int/eadbasic/pamslight-B75AA276DE17E2B14C67F8195440D4FB/7FE5QZZF3FXUS/EN/Charts/AD/NON_AIRAC/EG_AD_2_EGBJ_2-1_en_2016-03-03.pdf" target="New">View</a></td></tr><tr><td>Frequencies</td><td>127.475 (ATIS)<br />128.550 (Approach)<br />122.900 (Tower)<br />120.975 (Radar)<br />121.600 (Fire)<td></tr></table>'),
			EGBP = L.marker([51.6681, -2.0569], {icon: civilIcon}).bindPopup('<table><tr><th>Airfield:</th><th>Cotswold Airport, Kemble</th></tr><tr><td>ICAO:</td><td>EGBP</td></tr><tr><td>IATA:</td><td>GBA</td></tr><tr><td>Runways:</td><td>08 / 26</td></tr><tr><td>Aerodrome chart</td><td><a href="http://www.ead.eurocontrol.int/eadbasic/pamslight-B75AA276DE17E2B14C67F8195440D4FB/7FE5QZZF3FXUS/EN/Charts/AD/AIRAC/EG_AD_2_EGBP_2-1_en_2016-05-26.pdf" target="New">View</a></td></tr><tr><td>Frequencies</td><td>118.9 (AFIS)</td></tr></table>');
		
		var civilAirfields = L.layerGroup([EGBJ, EGBP]);

// Add UK mil airfields

		var EGVA = L.marker([51.6822, -1.7900], {icon: milIcon}).bindPopup('<table><tr><th>Airfield:</th><th>RAF Fairford</th></tr><tr><td>ICAO:</td><td>EGVA</td></tr><tr><td>IATA:</td><td>FFD</td></tr><tr><td>Runways:</td><td>09 / 27</td></tr><tr><td>Aerodrome chart</td><td><a href="http://www.pb-photos.com/downloads/Fairford.pdf" target="new">View</a></td></tr><tr><td>Frequencies</td><td>338.225 (Tower UHF)<br />234.250 (Ground UHF)<td></tr></table>');
		
		var milAirfields = L.layerGroup([EGVA]);

//Define colours and style for AARA boxes and radar corridors
		
//		var aaraStyle = {
//			"fillColor": "#71bf72",
//			"color": "#71bf72",
//			"weight": 1.5,
//			"opacity": 0.35
//		};

		var radarStyle = {
			"fillColor": "#00ffff",
			"color": "#00ffff",
			"weight": 3,
			"opacity": 0.35
		};
		

// Add radar corridors

		var radarSwindon_points = [
			[51.37, -2.2766666666666664],
    		[51.35027777777778, -2.0219444444444443],
    		[51.67833333333333, -1.557777777777778],
    		[51.738055555555555, -1.9138888888888888],
			[51.64722222222222, -1.8877777777777778]
    	];
    	
    	var radarDaventry_points = [
			[52.075833333333335, -1.6594444444444443],
    		[52.346944444444446, -0.8261111111111111],
    		[52.249722222222225, -0.6605555555555556],
    		[51.94694444444444, -1.5925000000000002]
    	];

    	var radarDaventry2_points = [
			[51.99472222222222, -1.9030555555555555],
    		[52.42027777777778, -0.5955555555555556],
    		[52.30583333333333, -0.48388888888888887],
    		[51.88333333333333, -1.7841666666666665]
    	];

    	var radarDean_points = [
			[54.816111111111105, -3.857222222222222],
    		[54.644999999999996, -3.631388888888889],
    		[54.61972222222222, -2.6191666666666666],
    		[54.78972222222222, -2.740277777777778]
    	];
    	
        var radarGamston_points = [
			[53.28583333333333, -1.0322222222222222],
    		[53.61222222222222, -0.77],
    		[53.540277777777774, -0.5177777777777778],
    		[53.236111111111114, -0.7641666666666667]
    	];	

        var radarLich_points = [
			[52.698611111111106, -2.3191666666666664],
    		[52.538333333333334, -2.093888888888889],
    		[52.80166666666666, -0.9725],
    		[52.97166666666667, -1.1427777777777777]
    	];
	
        var radarLich2_points = [
			[52.63638888888889, -2.578333333333333],
    		[52.54805555555556, -2.5030555555555556],
    		[52.46194444444445, -2.408333333333333],
    		[52.80166666666666, -0.9725],
    		[52.97166666666667, -1.1427777777777777]
    	];

        var radarWest_points = [
			[51.88333333333333, -1.7841666666666665],
    		[51.88333333333333, -1.478888888888889],
    		[52.43611111111111, -0.1661111111111111],
    		[52.4375, 0.23],
    		[51.70194444444445, -1.5227777777777778],
    		[51.67833333333333, -1.557777777777778]
    	];	
		
		var radarSwindon = L.polygon(radarSwindon_points, radarStyle);
		var radarDaventry = L.polygon(radarDaventry_points, radarStyle);
		var radarDaventry2 = L.polygon(radarDaventry2_points, radarStyle);
		var radarDean = L.polygon(radarDean_points, radarStyle);
		var radarGamston = L.polygon(radarGamston_points, radarStyle);
		var radarLich = L.polygon(radarLich_points, radarStyle);			
		var radarLich2 = L.polygon(radarLich2_points, radarStyle);	
		var radarWest = L.polygon(radarWest_points, radarStyle);
		
		var radarGroup = L.layerGroup([radarSwindon, radarDaventry, radarDaventry2, radarDean, radarGamston, radarLich, radarLich2, radarWest]);

// Add A2A refuelling areas

		var aara1 = L.polygon([
			[58.2, -4.5],
    		[56.35, -4.5],
    		[56.35, -5.083333],
    		[58.2, -5.083333]
		]);
		
		var aara2 = L.polygon([
    		[59.31666, -0.51666],
    		[59.4666, 0.0666],
    		[58.21666, 1.25],
    		[58.0666, 0.68333]
		]);
		
		var aara3 = L.polygon([
    		[57.883333, 0.83333],
    		[58.016666666666666, 1.4],
    		[56.416666666666664, 2.7666666666666666],
    		[56.28333333333333, 2.216666666666667]
		]);
		
		var aara4 = L.polygon([
    		[58.266666666666666, 0.016666666666666666],
    		[57.96666666666667, 0.25],
    		[57.583333333333336, -1.4833333333333334],
    		[57.88333333333333, -1.7166666666666668]
		]);
		
		var aara5 = L.polygon([
    		[56.05, -0.25],
    		[56.03333333333333, 1.6666666666666665],
    		[55.7, 1.65],
    		[55.71666666666667, -0.26666666666666666]
		]);

		var aara6 = L.polygon([
    		[55.266666666666666, 0.18333333333333332],
    		[54.68333333333333, -0.8833333333333333],
    		[54.4, -0.4166666666666667],
    		[55.0, 0.6166666666666667]
		]);

		var aara7 = L.polygon([
    		[55.43333333333333, 1.2666666666666666],
    		[55, 2.9833333333333334],
    		[54.7, 2.75],
    		[55.13333333333333, 1.0333333333333334]
		]);

		var aara8 = L.polygon([
    		[53.6, 0.7166666666666667],
    		[53.45, 2.5],
    		[53.11666666666667, 2.4333333333333336],
    		[53.266666666666666, 0.65]
		]);

		var aara9 = L.polygon([
    		[52.666666666666664, 1.8333333333333335],
    		[52.35, 1.8333333333333335],
    		[52.35, 2.6666666666666665],
    		[52.666666666666664, 2.9333333333333336]
		]);		

		var aara10E = L.polygon([
    		[51.28333333333333, -2.3833333333333333],
    		[51, -2.0833333333333335],
    		[50.46611111111111, -3.978888888888889],
    		[50.86611111111111, -3.89]
		]);	

		var aara10W = L.polygon([
    		[50.86611111111111, -3.89],
    		[50.46611111111111, -3.978888888888889],
    		[49.612500000000004, -6.728611111111111],
    		[49.93111111111111, -6.956388888888889]
		]);

		var aara11 = L.polygon([
    		[50.37555555555556, -5.673611111111112],
    		[50.051111111111105, -5.5552777777777775],
    		[49.69972222222222, -7.743055555555555],
    		[50.021388888888886, -7.875277777777778]
		]);

		var aara12 = L.polygon([
    		[50.4800000000000041, -7.916666666666667],
    		[50.980000000000004, -5.581666666666666],
    		[50.794999999999995, -4.761666666666667],
    		[50.666666666666664, -5.421666666666667],
    		[50.166666666666664, -7.743333333333333]
		]);

		var aara13 = L.polygon([
    		[53.983333333333334, -3.716666666666667],
    		[54.7, -4.116666666666666],
    		[54.63333333333333, -4.4],
    		[53.93333333333333, -3.9833333333333334]
		]);

		var aara14 = L.polygon([
    		[57.31666666666667, -6.483333333333333],
    		[55.766666666666666, -7.283333333333333],
    		[55.866666666666673, -7.883333333333333],
    		[57.416666666666664, -7.083333333333333]
		]);
    
		var aaraGroup = L.layerGroup([aara1, aara2, aara3, aara4, aara5, aara6, aara7, aara8, aara9, aara10E, aara10W, aara11, aara12, aara13, aara14]);

// Add Open AIP airspace mapping

		var openAIPairspace = L.tileLayer('http://{s}.tile.maps.openaip.net/geowebcache/service/tms/1.0.0/openaip_approved_airspaces_geometries@EPSG%3A900913@png/{z}/{x}/{y}.png', {
                maxZoom: 14,
                minZoom: 8,
                tms: true,
                detectRetina: true,
                subdomains: '12',
                format: 'image/png',
                transparent: true,
				opacity: 0.75,
				attribution: "Airspace overlay from OpenAIP.net"
            });

		var openAIPairspacelabels = L.tileLayer('http://{s}.tile.maps.openaip.net/geowebcache/service/tms/1.0.0/openaip_approved_airspaces_labels@EPSG%3A900913@png/{z}/{x}/{y}.png', {
                maxZoom: 14,
                minZoom: 8,
                tms: true,
                detectRetina: true,
                subdomains: '12',
                format: 'image/png',
                transparent: true,
				opacity: 0.75,
				attribution: "Airspace overlay from OpenAIP.net"
            }); 
            
		var openAIPairspace = L.layerGroup([openAIPairspace, openAIPairspacelabels]);           

// Add Open AIP airfields

		var openAIPairfields = L.tileLayer('http://{s}.tile.maps.openaip.net/geowebcache/service/tms/1.0.0/openaip_approved_airports@EPSG%3A900913@png/{z}/{x}/{y}.png', {
                maxZoom: 14,
                minZoom: 8,
                tms: true,
                detectRetina: true,
                subdomains: '12',
                format: 'image/png',
                transparent: true,
				opacity: 0.75,
				attribution: "Airspace overlay from OpenAIP.net"
            });

// Add Open Weather Map layers
//
//		var clouds = L.OWM.clouds({showLegend: false, opacity: 0.5, appId: owmKey});
//		var precipitation = L.OWM.precipitation({showLegend: false, opacity: 0.5, appId: owmKey});
//		var rain = L.OWM.rainClassic({showLegend: false, opacity: 0.5, appId: owmKey});
//		var wind = L.OWM.wind({showLegend: false, opacity: 0.5, appId: owmKey});
//		var pressurectr = L.OWM.pressureContour({showLegend: false, opacity: 0.5, appId: owmKey});


// Add Aeris Weather Tiles
            
            var aerisCloud = L.tileLayer('https://maps.aerisapi.com/' + AerisID + '_' + AerisSecretKey + '/satellite/{z}/{x}/{y}/current.png', {
                subdomains: '1234',
                opacity: 0.5,
				attribution: '&copy;AerisWeather'
            });
            
            var aerisInfraSat = L.tileLayer('https://maps.aerisapi.com/' + AerisID + '_' + AerisSecretKey + '/satellite-infrared-color/{z}/{x}/{y}/current.png', {
                subdomains: '1234',
                opacity: 0.5,
				attribution: '&copy;AerisWeather'
            });

            var aerisPressure = L.tileLayer('https://maps.aerisapi.com/' + AerisID + '_' + AerisSecretKey + '/fpressure-msl-isobars/{z}/{x}/{y}/current.png', {
                subdomains: '1234',
				attribution: '&copy;AerisWeather'
            });
            
            var aerisWind = L.tileLayer('https://maps.aerisapi.com/' + AerisID + '_' + AerisSecretKey + '/fwind-speeds/{z}/{x}/{y}/current.png', {
                subdomains: '1234',
                opacity: 0.5,
				attribution: '&copy;AerisWeather'
            });

// Add day night overlay

		var dayNight = L.terminator();

// Add OpenFlightMap overlays

		var ofmEurope = L.tileLayer('https://snapshots.openflightmaps.org/live/1808/tiles/world/noninteractive/epsg3857/merged/512/latest/{z}/{x}/{y}.png', {
            tilePixelRatio: 2,
            crossOrigin: '.png',
            minZoom: 7,
            maxZoom: 11,
            opacity: 0.5,
            attribution: '&copy;OpenFlightMap'
            });

// Define menu items

		var groupedOverlays = {
  			"Global Airspace": {
    			"Airspace": openAIPairspace,
				"Navaids": tacanVOR
  			},
  			"Global Airfields": {
    			"Airfields": openAIPairfields
  			},
  			"Global Weather": {
    			"Cloud": aerisCloud,
				"Rain radar": aerisInfraSat,
				"Wind" : aerisWind,
				"Air pressure (QNH)": aerisPressure,
				"Daylight and Night" : dayNight
  			},
  			"Regional overlays": {
				"UK A2A refuelling areas": aaraGroup,
				"UK military radar corridors": radarGroup,
				"UK Civil Airfields Info (IN DEVELOPMENT)": civilAirfields,
    			"UK Military Airfields Info (IN DEVELOPMENT)": milAirfields,
    			"Northern Europe Airspace": ofmEurope
  			}
		};

// Add layers and overlay menu to OSM map
		
		L.control.groupedLayers(null, groupedOverlays).addTo(map);


                    }
                });
            }
        });
    }
</script>
